{% extends 'quiz/base.html' %}
{% load static %}
{% block title %}Articles on {{ article_tag_slug.name }}{% endblock %}
{% block description %}
  Here are more advanced articles on the Japanese language!
{% endblock %}
{% block content %}
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-167867160-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-167867160-1');
</script>
</head>
<div class="container mb-5">
  <h1 class="top-menu mt-5">{{ article_category2_slug.name }}</h1>
  <div class="row d-flex justify-content-between">
    <div class="col-12 col-md-7 articles_list">
      {% for basic in object_list %}
        {% if basic.public %}
          <div class="article_container">
            <div class="article_title">
              <a href="{% url 'quiz:article_post' basic.title_slug %}">{{ basic.title }}</a>
            </div>
            <div class="article_info">
              {% if basic.summary %}
              <div class="article_summary">
                {{ basic.summary | safe }}
              </div>
              {% endif %}
              <div class="article_date">
                {{ basic.update |date:"M j, Y"}}
              </div>
              <div class="article_tags">
                {% for tag in basic.tag.all %}
                  <a class="article_tag" href="{% url 'quiz:article_tag_post' tag.slug %}">
                {{ tag }}
              </a>
                {% endfor %}
              </div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
    <div class="col-12 col-md-3 sidebar">
      {% include 'quiz/articles/article_tags.html' %}
    </div>
  </div>

  <div class="article_pagination col-12 col-lg-9 order-2 order-lg-3">
    <nav aria-label="navigation article_pagination">
      <ul class="pagination justify-content-center">
        {% if page_obj.number|add:"-3" > 1 %}
          <li class="page-item">
            <a class="page-link page-side" href="?page=1">1&laquo;</a>
          </li>
        {% endif %}

      {% for num in paginator.page_range %}
        {% if  num == page_obj.number|add:"-1" or num == page_obj.number|add:"-2" or num == page_obj.number|add:"1" or num == page_obj.number|add:"2" or num == page_obj.number|add:"-3" or num == page_obj.number|add:"3"  %}
          <li class="page-item "><a class="page-link other-num" href="?page={{num}}">{{num}}</a></li>
        {% endif %}

        {% if page_obj.number == num %}
          <li class="page-item disabled"><a class="page-link current_number">{{num}}</a></li>
        {% endif %}
      {% endfor %}

      {% if page_obj.paginator.num_pages > page_obj.number|add:"3" %}
        <li class="page-item">
          <a class="page-link page-side" href="?page={{ page_obj.paginator.num_pages }}" aria-label="Next">
            <span class="page-side" aria-hidden="true">&raquo;{{page_obj.paginator.num_pages}}</span>
          </a>
        </li>
      {% endif %}

      </ul>
    </nav>
  </div>

</div>

{% endblock %}
